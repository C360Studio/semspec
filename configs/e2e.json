{
  "version": "1.0.2",
  "platform": {
    "org": "semspec",
    "id": "semspec-e2e",
    "environment": "test"
  },
  "nats": {
    "urls": ["nats://nats:4222"],
    "max_reconnects": -1,
    "reconnect_wait": "2s",
    "jetstream": {
      "enabled": true
    }
  },
  "model_registry": {
    "capabilities": {
      "planning": {
        "preferred": ["ollama-qwen"],
        "fallback": ["ollama-qwen"]
      }
    },
    "endpoints": {
      "ollama-qwen": {
        "provider": "ollama",
        "url": "http://host.docker.internal:11434/v1",
        "model": "qwen2.5-coder:14b",
        "max_tokens": 131072
      }
    },
    "defaults": {
      "model": "ollama-qwen"
    }
  },
  "services": {
    "service-manager": {
      "name": "service-manager",
      "enabled": true,
      "config": {
        "http_port": 8080
      }
    },
    "component-manager": {
      "name": "component-manager",
      "enabled": true,
      "config": {}
    },
    "heartbeat": {
      "name": "heartbeat",
      "enabled": false,
      "config": {}
    },
    "message-logger": {
      "name": "message-logger",
      "enabled": true,
      "config": {
        "buffer_size": 10000,
        "monitor_subjects": ["user.>", "agent.>", "tool.>", "graph.>", "workflow.>", "source.>", "context.>"]
      }
    }
  },
  "components": {
    "agentic-dispatch": {
      "name": "agentic-dispatch",
      "type": "processor",
      "enabled": true,
      "config": {
        "default_role": "general",
        "default_model": "qwen",
        "auto_continue": false,
        "stream_name": "USER",
        "permissions": {
          "view": ["*"],
          "submit_task": ["*"],
          "cancel_own": true,
          "cancel_any": ["admin"],
          "approve": ["*"]
        }
      }
    },
    "agentic-loop": {
      "name": "agentic-loop",
      "type": "processor",
      "enabled": true,
      "config": {
        "max_iterations": 10,
        "timeout": "120s",
        "stream_name": "AGENT",
        "loops_bucket": "AGENT_LOOPS",
        "trajectories_bucket": "AGENT_TRAJECTORIES",
        "context": {
          "enabled": false
        }
      }
    },
    "agentic-model": {
      "name": "agentic-model",
      "type": "processor",
      "enabled": true,
      "config": {
        "stream_name": "AGENT",
        "timeout": "120s",
        "endpoints": {
          "ollama-qwen": {
            "url": "http://host.docker.internal:11434/v1",
            "model": "qwen2.5-coder:14b"
          }
        },
        "model_aliases": {
          "qwen": "ollama-qwen",
          "default": "ollama-qwen"
        }
      }
    },
    "agentic-tools": {
      "name": "agentic-tools",
      "type": "processor",
      "enabled": true,
      "config": {
        "stream_name": "AGENT",
        "consumer_name_suffix": "semspec-e2e"
      }
    },
    "ast-indexer": {
      "name": "ast-indexer",
      "type": "processor",
      "enabled": true,
      "config": {
        "watch_paths": [
          {
            "path": "/workspace",
            "org": "e2e",
            "project": "test",
            "languages": ["go", "typescript", "python", "java", "javascript", "svelte"],
            "excludes": ["node_modules", ".git", ".semspec", "vendor"]
          }
        ],
        "watch_enabled": true,
        "index_interval": "10s",
        "stream_name": "GRAPH"
      }
    },
    "rdf-export": {
      "name": "rdf-export",
      "type": "output",
      "enabled": true,
      "config": {
        "ports": {
          "inputs": [{
            "name": "entities_in",
            "subject": "graph.ingest.entity",
            "type": "jetstream",
            "stream_name": "GRAPH"
          }],
          "outputs": [{
            "name": "rdf_out",
            "subject": "graph.export.rdf",
            "type": "nats"
          }]
        },
        "format": "turtle",
        "profile": "minimal",
        "base_iri": "https://semspec.dev"
      }
    },
    "graph-ingest": {
      "name": "graph-ingest",
      "type": "processor",
      "enabled": true,
      "config": {
        "ports": {
          "inputs": [{
            "name": "entities_in",
            "subject": "graph.ingest.entity",
            "type": "jetstream",
            "stream_name": "GRAPH"
          }],
          "outputs": [{
            "name": "entity_states",
            "subject": "ENTITY_STATES",
            "type": "kv-write"
          }]
        },
        "enable_hierarchy": true
      }
    },
    "graph-index": {
      "name": "graph-index",
      "type": "processor",
      "enabled": true,
      "config": {
        "ports": {
          "inputs": [{
            "name": "entity_watch",
            "subject": "ENTITY_STATES",
            "type": "kv-watch"
          }],
          "outputs": [
            {"name": "outgoing_index", "subject": "OUTGOING_INDEX", "type": "kv"},
            {"name": "incoming_index", "subject": "INCOMING_INDEX", "type": "kv"},
            {"name": "alias_index", "subject": "ALIAS_INDEX", "type": "kv"},
            {"name": "predicate_index", "subject": "PREDICATE_INDEX", "type": "kv"}
          ]
        },
        "workers": 2,
        "batch_size": 50
      }
    },
    "graph-query": {
      "name": "graph-query",
      "type": "processor",
      "enabled": true,
      "config": {
        "ports": {
          "inputs": [{
            "name": "query_requests",
            "subject": "graph.query.>",
            "type": "nats-request"
          }],
          "outputs": []
        },
        "request_timeout": "5s",
        "max_traversal_depth": 5,
        "max_traversal_nodes": 100
      }
    },
    "graph-gateway": {
      "name": "graph-gateway",
      "type": "gateway",
      "enabled": true,
      "config": {
        "ports": {
          "inputs": [{"name": "http", "subject": ":8082", "type": "http"}],
          "outputs": [{"name": "mutations", "subject": "graph.mutation.*", "type": "nats-request"}]
        },
        "graphql_path": "/graphql",
        "mcp_path": "/mcp",
        "bind_address": ":8082",
        "enable_playground": true
      }
    },
    "workflow-processor": {
      "name": "workflow-processor",
      "type": "processor",
      "enabled": false,
      "config": {
        "stream_name": "WORKFLOW",
        "definitions_bucket": "WORKFLOW_DEFINITIONS",
        "executions_bucket": "WORKFLOW_EXECUTIONS",
        "default_timeout": "30m",
        "default_max_iterations": 10,
        "request_timeout": "5m",
        "workflow_files": ["configs/workflows/*.json"]
      }
    },
    "reactive-workflow": {
      "name": "reactive-workflow",
      "type": "processor",
      "enabled": true,
      "config": {
        "state_bucket": "REACTIVE_STATE",
        "callback_stream_name": "WORKFLOW",
        "event_stream_name": "WORKFLOW",
        "default_timeout": "30m",
        "default_max_iterations": 10,
        "enable_metrics": true
      }
    },
    "planner": {
      "name": "planner",
      "type": "processor",
      "enabled": true,
      "config": {
        "timeout": "120s",
        "max_iterations": 5,
        "output_dir": "/workspace/.semspec/plans"
      }
    },
    "trajectory-api": {
      "name": "trajectory-api",
      "type": "processor",
      "enabled": true,
      "config": {
        "llm_calls_bucket": "LLM_CALLS",
        "loops_bucket": "AGENT_LOOPS"
      }
    },
    "workflow-api": {
      "name": "workflow-api",
      "type": "processor",
      "enabled": true,
      "config": {
        "execution_bucket_name": "WORKFLOW_EXECUTIONS"
      }
    },
    "plan-coordinator": {
      "name": "plan-coordinator",
      "type": "processor",
      "enabled": true,
      "config": {
        "stream_name": "WORKFLOW",
        "consumer_name": "plan-coordinator",
        "trigger_subject": "workflow.trigger.plan-coordinator",
        "sessions_bucket": "PLAN_SESSIONS",
        "max_concurrent_planners": 3,
        "planner_timeout": "120s",
        "default_capability": "planning"
      }
    },
    "source-ingester": {
      "name": "source-ingester",
      "type": "processor",
      "enabled": true,
      "config": {
        "stream_name": "SOURCES",
        "consumer_name": "source-ingester-e2e",
        "sources_dir": "/workspace/sources",
        "analysis_timeout": "30s",
        "chunk_config": {
          "target_tokens": 500,
          "max_tokens": 800,
          "min_tokens": 100
        },
        "watch_config": {
          "enabled": true,
          "debounce_delay": "500ms",
          "file_extensions": [".md", ".txt", ".rst", ".adoc"],
          "exclude_dirs": [".git", "node_modules"]
        }
      }
    },
    "task-generator": {
      "name": "task-generator",
      "type": "processor",
      "enabled": true,
      "config": {
        "stream_name": "WORKFLOW",
        "consumer_name": "task-generator",
        "trigger_subject": "workflow.async.task-generator",
        "default_capability": "planning",
        "context_subject_prefix": "context.build",
        "context_response_bucket": "CONTEXT_RESPONSES",
        "context_timeout": "60s"
      }
    },
    "plan-reviewer": {
      "name": "plan-reviewer",
      "type": "processor",
      "enabled": true,
      "config": {
        "stream_name": "WORKFLOW",
        "consumer_name": "plan-reviewer",
        "trigger_subject": "workflow.async.plan-reviewer",
        "result_subject_prefix": "workflow.result.plan-reviewer",
        "default_capability": "reviewing",
        "context_subject_prefix": "context.build",
        "context_response_bucket": "CONTEXT_RESPONSES",
        "context_timeout": "60s"
      }
    },
    "task-reviewer": {
      "name": "task-reviewer",
      "type": "processor",
      "enabled": true,
      "config": {
        "stream_name": "WORKFLOW",
        "consumer_name": "task-reviewer",
        "trigger_subject": "workflow.async.task-reviewer",
        "result_subject_prefix": "workflow.result.task-reviewer",
        "default_capability": "reviewing",
        "context_subject_prefix": "context.build",
        "context_response_bucket": "CONTEXT_RESPONSES",
        "context_timeout": "60s"
      }
    },
    "context-builder": {
      "name": "context-builder",
      "type": "processor",
      "enabled": true,
      "config": {
        "stream_name": "AGENT",
        "consumer_name": "context-builder",
        "input_subject_pattern": "context.build.>",
        "output_subject_prefix": "context.built",
        "default_token_budget": 32000,
        "headroom_tokens": 6400,
        "graph_gateway_url": "http://localhost:8082",
        "repo_path": "/workspace",
        "sop_entity_prefix": "c360.semspec.source.doc",
        "response_bucket_name": "CONTEXT_RESPONSES",
        "graph_readiness_budget": "20s",
        "standards_path": ".semspec/standards.json"
      }
    },
    "project-api": {
      "name": "project-api",
      "type": "processor",
      "enabled": true,
      "config": {
        "repo_path": "/workspace"
      }
    },
    "structural-validator": {
      "name": "structural-validator",
      "type": "processor",
      "enabled": true,
      "config": {
        "stream_name": "WORKFLOW",
        "consumer_name": "structural-validator",
        "repo_path": "/workspace",
        "checklist_path": ".semspec/checklist.json",
        "default_timeout": "120s"
      }
    }
  },
  "streams": {
    "USER": {
      "subjects": ["user.message.>", "user.response.>", "user.signal.>"],
      "max_age": "1h",
      "storage": "memory",
      "replicas": 1
    },
    "AGENT": {
      "subjects": [
        "agent.task.>",
        "agent.request.>",
        "agent.response.>",
        "agent.signal.>",
        "agent.complete.>",
        "agent.created.>",
        "agent.failed.>",
        "agent.context.compaction.>",
        "context.build.>",
        "context.built.>",
        "tool.execute.>",
        "tool.result.>",
        "question.ask.>",
        "question.answer.>",
        "question.timeout.>",
        "question.escalate.>"
      ],
      "max_age": "24h",
      "storage": "memory",
      "replicas": 1
    },
    "GRAPH": {
      "subjects": [
        "graph.ingest.entity",
        "graph.export.>"
      ],
      "max_age": "24h",
      "storage": "memory",
      "replicas": 1
    },
    "WORKFLOW": {
      "subjects": [
        "workflow.trigger.>",
        "workflow.async.>",
        "workflow.result.>",
        "workflow.callback.>",
        "workflow.step.complete.>",
        "workflow.step.result.>",
        "workflow.events.>",
        "workflow.validate.>",
        "workflow.task.complete",
        "output.workflow.>",
        "proposal.request.>",
        "design.request.>",
        "spec.request.>",
        "tasks.request.>",
        "approve.request.>",
        "archive.request.>",
        "github.request.>"
      ],
      "max_age": "24h",
      "storage": "memory",
      "replicas": 1
    },
    "SOURCES": {
      "subjects": [
        "source.ingest.>",
        "source.status.>"
      ],
      "max_age": "24h",
      "storage": "memory",
      "replicas": 1
    }
  }
}
